# SuperClaude Entry Point

@COMMANDS.md
@FLAGS.md
@PRINCIPLES.md
@RULES.md
@MCP.md
@PERSONAS.md
@ORCHESTRATOR.md
@MODES.md
@WORKFLOW.md

# Testing Protocols

- IMPORTANT: If I ask you to perform end to end tests of one or more user stories with puppeteer or playwright, you MUST verify that the user stories pass these tests with direct, empirical operations and interactions with the user interface via those MCP tools.  You must be fully transparent about whether the tests actually passed before declaring the job complete.  If you find an error or problem that prevents you from completing the test, you MUST report this to the engineering team subagents so that they can address the problem.

# System References

- CRITICAL: When referring to dates, you MUST reference the system clock.  Do not use your cut-off date as a reference when applying a timestamp or referencing any date relative to 'now'

# Github Issue Management

- Before closing a Github Issue, you MUST:
  - write regression tests and confirm that these are passing to ensure that the issue does not reoccur
  - post a comment to the Github Issue, summarizing the work done to resolve the issue.  If the issue was a problem or bug report, include a description of what was found to be the cause.
  - commit your changes, then merge the feature branch you were using to address the Github Issue into the development branch
  - prune the feature branch you were using to address the Github Issue (after confirming that it's been merged into development)
  - update the project documentation with what was learned from resolving this Github Issue

- When working to resolve a Github Issue, you MUST: 
  - confirm that you have the development branch checked out in git
  - create a new feature branch from development, for the GitHub Issue and check it out (or just check it out if it already exists)
  - use an agile and test-driven development approach while working to resolve the issue
  - CRITICAL: TEST your work! VERIFY that the fix you implement actually resolves the issue!
    - Whenever possible, verify empirically, using MCP tools such as playwright and puppeteer to actually observe that the fix is working as expected
    - If the test fails, then address the failure and test again.  Iterate until the issue is confirmed to be resolved.
    - If an issue can not be resolved, adjust the status of the Github Issue to 'escalate to human'
  - if you pause to provide a mid-job summary, you MUST
    - be completely honest, transparent and up-front about any portion of the job that has not yet been addressed
    - provide recommendations for the next steps.

# Email Communication

- When sending an email message, you MUST:
  - adhere to the style guidelines specified in ~/.claude/WRITING_STYLE.md unless explicitly directed otherwise
  - use the first person, writing as me (Arlen), unless explicitly directed otherwise

## Himalaya CLI Email (Gmail MCP Fallback)

**IMPORTANT**: When Gmail MCP is unavailable, offer to use Himalaya CLI to send emails via command line.

- **Configuration**: Fully set up at `~/Library/Application Support/himalaya/config.toml`
- **Documentation**: See `~/.claude/HIMALAYA_EMAIL_CLI.md` for complete details
- **Account**: arlenagreer@gmail.com (configured and tested)

### Quick Send Commands

```bash
# Plain text email
himalaya message send << 'EOF'
From: arlenagreer@gmail.com
To: recipient@example.com
Subject: Your Subject

Message body here
EOF

# HTML email (single command, no file needed)
himalaya message send << 'EOF'
From: arlenagreer@gmail.com
To: recipient@example.com
Subject: HTML Email
MIME-Version: 1.0
Content-Type: text/html; charset=utf-8

<!DOCTYPE html>
<html><body>
<h1>HTML Content</h1>
</body></html>
EOF
```

**Status**: ✅ Installed, configured, and verified working (Oct 9, 2025)

# Text Message Communication

## Built-in iMessage Command
- When asked to send a text message to a person by name, you MUST:
  - Look up the person's phone number(s) in ~/.claude/contacts.csv
  - If multiple phone numbers exist for that person (e.g., Mobile, Work, Home), ask which number to use
  - Use the imessage command with the selected phone number in international format (e.g., +1XXXXXXXXXX)
  - If the person is not found in the contacts file, ask for their phone number

## Custom SMS Script
A custom SMS script is available at `~/.claude/send_sms.rb` for enhanced text messaging capabilities:

### Usage
```bash
# Send by name (looks up in contacts.csv)
~/.claude/send_sms.rb -n "John Doe" -m "Your message here"

# Send by name with phone type specification
~/.claude/send_sms.rb -n "John Doe" -t mobile -m "Your message here"

# Send directly to phone number
~/.claude/send_sms.rb -p "+16097603393" -m "Your message here"

# Show help
~/.claude/send_sms.rb -h
```

### Options
- `-n, --name NAME`: Recipient name (searches contacts.csv)
- `-p, --phone PHONE`: Direct phone number (overrides name lookup)
- `-m, --message MESSAGE`: Message text to send
- `-t, --type TYPE`: Phone type (mobile/work/home) when multiple exist
- `-h, --help`: Show help message

### Features
- Automatic contact lookup from ~/.claude/contacts.csv
- Handles multiple phone numbers per contact
- Auto-formats phone numbers to international format
- Falls back to iMessage protocol (true SMS requires carrier integration)

### Note
This script uses the iMessage protocol. Recipients without Apple accounts will not receive messages. For true SMS capability, integration with services like Twilio would be required.

## Task Master AI Instructions

### Complete CLI Command Reference

#### Project Setup & Configuration
```bash
# Initialize new project
task-master init [--name=<name>] [--description=<desc>] [-y]

# Configure AI models
task-master models                                    # View current configuration
task-master models --setup                           # Interactive setup
task-master models --set-main <model_id>            # Set primary model
task-master models --set-research <model_id>        # Set research model
task-master models --set-fallback <model_id>        # Set fallback model

# Language settings
task-master lang [--language=<lang>]                # Set response language

# Rule profiles management
task-master rules add <profile1> <profile2>         # Add rule profiles
task-master rules remove <profile1>                 # Remove rule profiles

# Migrate existing project structure
task-master migrate                                 # Migrate to .taskmaster directory
```

#### Task Generation & Management
```bash
# Parse PRD and generate tasks
task-master parse-prd --input=<file.txt> [--num-tasks=10] [--append]

# Task status management
task-master list [--status=<status>] [--with-subtasks]
task-master set-status --id=<id> --status=<status>
task-master next                                    # Show next task to work on
task-master show <id>                              # Show task details

# Add and remove tasks
task-master add-task --prompt="description" [--research] [--dependencies=<ids>]
task-master remove-task --id=<id> [-y]

# Update tasks
task-master update --from=<id> --prompt="changes"   # Update multiple tasks
task-master update-task --id=<id> --prompt="changes" # Update single task
task-master update-subtask --id=<id> --prompt="notes" # Update subtask

# Task scoping adjustments
task-master scope-up --id=<id> [--strength=regular] [--research]
task-master scope-down --id=<id> [--strength=regular] [--research]

# Move tasks in hierarchy
task-master move --from=<id> --to=<id>
```

#### Subtask Management
```bash
# Add subtasks
task-master add-subtask --parent=<id> --title="title" [--description="desc"]
task-master add-subtask --parent=<id> --task-id=<id>  # Convert task to subtask

# Remove and clear subtasks
task-master remove-subtask --id=<parentId.subtaskId> [--convert]
task-master clear-subtasks --id=<id>
task-master clear-subtasks --all

# Expand tasks into subtasks
task-master expand --id=<id> [--num=5] [--research] [--force]
task-master expand --all [--force] [--research]
```

#### Analysis & Research
```bash
# Complexity analysis
task-master analyze-complexity [--research] [--threshold=5]
task-master complexity-report [--file=<path>]

# AI-powered research
task-master research "<prompt>" [-i=<task_ids>] [-f=<file_paths>] 
                    [-c="<context>"] [--tree] [-s=<save_file>] 
                    [-d=<detail_level>]
```

#### Tag Management (Multi-Context Support)
```bash
# List and manage tags
task-master tags [--show-metadata]                  # List all tags
task-master add-tag <tagName> [--copy-from-current] [--copy-from=<tag>] [-d="desc"]
task-master use-tag <tagName>                       # Switch to tag context
task-master delete-tag <tagName> [--yes]
task-master rename-tag <oldName> <newName>
task-master copy-tag <sourceName> <targetName> [-d="desc"]
```

#### Dependency Management
```bash
task-master add-dependency --id=<id> --depends-on=<id>
task-master remove-dependency --id=<id> --depends-on=<id>
task-master validate-dependencies                   # Check for issues
task-master fix-dependencies                        # Auto-fix issues
```

#### Export & Synchronization
```bash
# Sync tasks to README.md
task-master sync-readme [--with-subtasks] [--status=<status>]

# Generate individual task files
task-master generate
```

### Quick Reference Examples

#### Daily Workflow
```bash
# Morning startup
task-master next                                    # Find next task
task-master show 1.2                               # View task details
task-master set-status --id=1.2 --status=in-progress

# During development
task-master update-subtask --id=1.2.1 --prompt="Implemented auth middleware"
task-master add-dependency --id=2.1 --depends-on=1.2

# Task completion
task-master set-status --id=1.2 --status=done
task-master next                                    # Get next task
```

#### Complex Operations
```bash
# Research and expand all tasks
task-master analyze-complexity --research
task-master expand --all --research --force

# Scope adjustments
task-master scope-up --id=3 --strength=heavy --research
task-master scope-down --id=4 --strength=light

# Multi-context development
task-master add-tag feature-auth --copy-from-current
task-master use-tag feature-auth
task-master list --with-subtasks
```

#### AI-Powered Research
```bash
# Research with task context
task-master research "Best authentication patterns" -i=1.2,1.3 --tree

# Research with file context
task-master research "Security vulnerabilities" -f="backend/auth.js" -s=research.md

# Research with custom context
task-master research "Performance optimization" -c="Using Redis cache" -d=high
```

**Import Task Master's additional development workflow commands and guidelines:**
@./.taskmaster/CLAUDE.md

# iMessage Command-Line Integration

## Overview
The `imessage-ruby` package is installed and available for sending messages via Apple's Messages app from the command line.

## Basic Usage

### Command-Line Interface
```bash
# Send a simple text message
imessage -t "Your message text" -c "+1234567890"

# Send to email address (if iMessage-enabled)
imessage -t "Hello!" -c "email@example.com"

# Send with attachment
imessage -t "Check this file" -c "+1234567890" -a "/path/to/file.pdf"

# Send to multiple recipients
imessage -t "Group message" -c "+1234567890,email@example.com"
```

### Command Options
- `-t, --text [TEXT]` - The text message to send
- `-c, --contacts x,y,z` - Recipients (phone numbers or email addresses)
- `-a, --attachment [FILE]` - Path to file attachment
- `-h, --help` - Show help information

## Important Notes

### Requirements
- **macOS only** - Requires Apple Messages app
- **Authentication** - Messages app must be signed in with Apple ID
- **Permissions** - May prompt for accessibility/automation permissions on first use
- **Recipients** - Must be in contacts or have previous message history

### Recipient Format
- **Phone numbers**: Use international format with country code (e.g., "+1234567890")
- **Email addresses**: Must be iMessage-enabled Apple IDs
- **Multiple recipients**: Comma-separated list without spaces

### Limitations
- Cannot send to non-iMessage numbers (green bubble SMS)
- Attachments limited to file types supported by Messages
- Rate limiting may apply for bulk messages
- Requires GUI session (cannot run in pure SSH/headless mode)

### Error Handling
- Check exit code: 0 for success, non-zero for failure
- No delivery confirmation available via CLI
- Check Messages app for send status

## Integration Examples

### Shell Script
```bash
#!/bin/bash
# Send notification when job completes
if ./long-running-job.sh; then
    imessage -t "✅ Job completed successfully" -c "+1234567890"
else
    imessage -t "❌ Job failed" -c "+1234567890"
fi
```

### Ruby Integration
```ruby
# Using system call
system("imessage", "-t", "Hello from Ruby", "-c", "+1234567890")

# With error handling
if system("imessage", "-t", message, "-c", recipient)
  puts "Message sent"
else
  puts "Failed to send"
end
```

### Python Integration
```python
import subprocess

def send_imessage(recipient, message):
    result = subprocess.run([
        'imessage', 
        '-t', message, 
        '-c', recipient
    ], capture_output=True)
    return result.returncode == 0
```

- IMPORTANT/CRITICAL When you send an email message that references the current date, you MUST use the local system clock to calculate the current date

# ===================================================
# SuperClaude Framework Components
# ===================================================

# Behavioral Modes
@MODE_Brainstorming.md
@MODE_Business_Panel.md
@MODE_DeepResearch.md
@MODE_Introspection.md
@MODE_Orchestration.md
@MODE_Task_Management.md
@MODE_Token_Efficiency.md

# MCP Documentation
@MCP_Context7.md
@MCP_Magic.md
@MCP_Morphllm.md
@MCP_Playwright.md
@MCP_Sequential.md
@MCP_Serena.md
@MCP_Tavily.md

# Core Framework
@BUSINESS_PANEL_EXAMPLES.md
@BUSINESS_SYMBOLS.md
@RESEARCH_CONFIG.md
- Remember to offer to use the Himilaya CLI to send emails in the event that the Gmail MCP is not available